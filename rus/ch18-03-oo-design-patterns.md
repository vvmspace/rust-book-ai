## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –û–û–ü: –ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –ó–µ–º–ª–∏ üåç

–ï—Å—Ç—å —Ç–∞–∫–∞—è —à—Ç—É–∫–∞ ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω "–°–æ—Å—Ç–æ—è–Ω–∏–µ" (State Pattern). –≠—Ç–æ –∫–æ–≥–¥–∞ –æ–±—ä–µ–∫—Ç –º–µ–Ω—è–µ—Ç —Å–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤–∞—à –∫–æ—Ç: –æ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–°–æ–Ω", "–ï–¥–∞" –∏–ª–∏ "–¢—ã–≥—ã–¥—ã–∫".

–ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º workflow –¥–ª—è –±–ª–æ–≥–∞:
`Draft` (–ß–µ—Ä–Ω–æ–≤–∏–∫) -> `PendingReview` (–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ) -> `Published` (–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ).

### –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –û–û–ü –ø–æ–¥—Ö–æ–¥ (–∏ –ø–æ—á–µ–º—É –æ–Ω –≤ Rust –≤—ã–≥–ª—è–¥–∏—Ç —Å—Ç—Ä–∞–Ω–Ω–æ)

–ú—ã —Å–æ–∑–¥–∞–¥–∏–º —Ç—Ä–µ–π—Ç `State` –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `Post`, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

```rust
struct Post {
    state: Option<Box<dyn State>>,
    content: String,
}
```

–ü–æ—Å—Ç–æ–π—Ç–µ, –ø–æ—á–µ–º—É `Option`? –ü–æ—Ç–æ–º—É —á—Ç–æ Rust –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–∞–º –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –≤–∑—è—Ç—å –∏ –ø–æ–¥–º–µ–Ω–∏—Ç—å –ø–æ–ª–µ. –ú—ã –¥–æ–ª–∂–Ω—ã *–∑–∞–±—Ä–∞—Ç—å* (take) —Å—Ç–∞—Ä–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–æ—Å—Ç–∞–≤–∏–≤ —Ç–∞–º `None` –Ω–∞ —Å–µ–∫—É–Ω–¥—É), —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∏ –ø–æ–ª–æ–∂–∏—Ç—å –Ω–æ–≤–æ–µ. –≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ç–∞–Ω–µ—Ü —Å –±—É–±–Ω–æ–º –≤–æ–∫—Ä—É–≥ –≤–ª–∞–¥–µ–Ω–∏—è.

### Rust-way: –¢–∏–ø—ã –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è üß†

–ê —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤–∫–ª—é—á–∏–º –º–æ–∑–≥ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞. –ó–∞—á–µ–º –Ω–∞–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ, –µ—Å–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏?

–í–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ `Post` —Å –ø–æ–ª–µ–º `state`, –º—ã —Å–¥–µ–ª–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã:

- `DraftPost`
- `PendingReviewPost`
- `Post` (—É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–π)

```rust
let post = Post::new(); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç DraftPost
let post = post.request_review(); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç PendingReviewPost
let post = post.approve(); // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Post
```

–¢–µ–ø–µ—Ä—å –≤—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å `content()` —É —á–µ—Ä–Ω–æ–≤–∏–∫–∞. –≠—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Ç!
–ï—Å–ª–∏ –≤—ã –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å, –∫–æ–¥ *–Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è*.
–≠—Ç–æ –∏ –µ—Å—Ç—å **Type State Pattern**.

### –ò—Ç–æ–≥

- **–û–û–ü (State Pattern)**: –ì–∏–±–∫–æ, –Ω–æ –æ—à–∏–±–∫–∏ –ª–æ–≤–∏–º –≤ —Ä–∞–Ω—Ç–∞–π–º–µ.
- **Rust (Type State)**: –ñ–µ–ª–µ–∑–Ω–∞—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏ –ª–æ–≤–∏–º –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

–í—ã–±–∏—Ä–∞–π—Ç–µ –º—É–¥—Ä–æ.

---

**–ê–Ω–µ–∫–¥–æ—Ç:**

> ‚Äî –í –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–∞—à –ø—Ä–æ–µ–∫—Ç?  
> ‚Äî –í –∂–∏–¥–∫–æ–º.  
> ‚Äî –≠—Ç–æ –∫–∞–∫?  
> ‚Äî –ï—â–µ –Ω–µ –∑–∞—Ç–≤–µ—Ä–¥–µ–ª, –Ω–æ —É–∂–µ —É—Ç–µ–∫–∞–µ—Ç.
