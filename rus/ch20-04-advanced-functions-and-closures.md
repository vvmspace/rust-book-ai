## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∑–∞–º—ã–∫–∞–Ω–∏—è üß†

–ó–¥–µ—Å—å –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –≤–µ—â–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Rust –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –º–æ—â–Ω—ã–º –æ—Ä—É–∂–∏–µ–º: —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–º—ã–∫–∞–Ω–∏–π.

### –£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏: –∫–æ–≥–¥–∞ –∑–∞–º—ã–∫–∞–Ω–∏—è ‚Äî —ç—Ç–æ —Å–ª–∏—à–∫–æ–º

–ú—ã –ø—Ä–∏–≤—ã–∫–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–º—ã–∫–∞–Ω–∏—è. –ù–æ –∑–Ω–∞–µ—Ç–µ —á—Ç–æ? –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏!
–§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —Ç–∏–ø—É `fn` (—Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã, –Ω–µ –ø—É—Ç–∞—Ç—å —Å —Ç—Ä–µ–π—Ç–æ–º `Fn`). –≠—Ç–æ—Ç —Ç–∏–ø –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é**.

–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

1. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –Ω–æ–≤–æ–π –ª—è–º–±–¥—ã.
2. –ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å C-–∫–æ–¥–æ–º (—Ç–∞–º –∑–∞–º—ã–∫–∞–Ω–∏–π –Ω–µ—Ç, —Ç–æ–ª—å–∫–æ —Ö–∞—Ä–¥–∫–æ—Ä–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏).

```rust
fn add_one(x: i32) -> i32 {
    x + 1
}

fn do_twice(f: fn(i32) -> i32, arg: i32) -> i32 {
    f(arg) + f(arg)
}

fn main() {
    let answer = do_twice(add_one, 5);
    println!("The answer is: {}", answer);
}
```

–í–∏–¥–∏—Ç–µ? `f: fn(i32) -> i32`. –≠—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, –∞ –Ω–µ –¥–∂–µ–Ω–µ—Ä–∏–∫ —Å —Ç—Ä–µ–π—Ç-–±–∞—É–Ω–¥–æ–º.

–ö—Å—Ç–∞—Ç–∏, —ç–ª–µ–º–µ–Ω—Ç—ã `enum` (–≤–∞—Ä–∏–∞–Ω—Ç—ã) ‚Äî —ç—Ç–æ —Ç–æ–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã. –ò—Ö —Ç–æ–∂–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ `fn`!

### –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∑–∞–º—ã–∫–∞–Ω–∏–π üéÅ

–ê –≤–æ—Ç —Ç—É—Ç –≤—Å–µ —Ö–∏—Ç—Ä–æ. –ó–∞–º—ã–∫–∞–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —Ç—Ä–µ–π—Ç–∞–º–∏ (`Fn`, `FnMut`, `FnOnce`), –∞ —Ç—Ä–µ–π—Ç—ã –Ω–µ–ª—å–∑—è –≤–µ—Ä–Ω—É—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö –Ω–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤ –ø–∞–º—è—Ç–∏ (Sized).

–ï—Å–ª–∏ –≤—ã –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å `-> Fn(i32) -> i32`, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–∞—Å—Ç –≤–∞–º –ø–æ —Ä—É–∫–∞–º.

–ß—Ç–æ –¥–µ–ª–∞—Ç—å?

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `impl Trait` (–µ—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–¥–∏–Ω —Ç–∏–ø –∑–∞–º—ã–∫–∞–Ω–∏—è).
```rust
fn returns_closure() -> impl Fn(i32) -> i32 {
    |x| x + 1
}
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Box<dyn Trait>` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å *—Ä–∞–∑–Ω—ã–µ* –∑–∞–º—ã–∫–∞–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π).
```rust
fn returns_closure(a: i32) -> Box<dyn Fn(i32) -> i32> {
    if a > 0 {
        Box::new(move |b| a + b)
    } else {
        Box::new(move |b| a - b)
    }
}
```

–≠—Ç–æ —Ç—Ä–µ–π—Ç-–æ–±—ä–µ–∫—Ç—ã. –ú—ã –∫–ª–∞–¥–µ–º –∑–∞–º—ã–∫–∞–Ω–∏–µ –≤ –∫—É—á—É (Heap) –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å. –ù–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∑–∞—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –ò—Ç–æ–≥–∏

–¢–µ–ø–µ—Ä—å –≤—ã —É–º–µ–µ—Ç–µ –∂–æ–Ω–≥–ª–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –∫–∞–∫ –∑–∞–ø—Ä–∞–≤—Å–∫–∏–π —Ü–∏—Ä–∫–∞—á. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏—Ö, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∏—Ö, —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Rust ‚Äî —ç—Ç–æ –º–æ—â—å.

–ê —Ç–µ–ø–µ—Ä—å... –ú–ê–ö–†–û–°–´! (–ï—Å–ª–∏ –≤—ã —á–∏—Ç–∞–µ—Ç–µ —ç—Ç–æ –Ω–µ –ø–æ –ø–æ—Ä—è–¥–∫—É, —Ç–æ –≤—ã –∏—Ö —É–∂–µ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –∏–ª–∏ –æ–Ω–∏ –µ—â–µ –≤–ø–µ—Ä–µ–¥–∏).

---

**–ê–Ω–µ–∫–¥–æ—Ç:**

> ‚Äî –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∑–∞–º—ã–∫–∞–Ω–∏–µ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏?  
> ‚Äî –ú–æ–∂–Ω–æ, –µ—Å–ª–∏ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ.  
> ‚Äî –ê –µ—Å–ª–∏ –º–Ω–µ –Ω—É–∂–Ω–æ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö?  
> ‚Äî –¢–æ–≥–¥–∞ –∫–ª–∞–¥–∏ –∏—Ö –≤ –∫–æ—Ä–æ–±–∫—É (Box).  
> ‚Äî –ê –µ—Å–ª–∏ —è –Ω–µ —Ö–æ—á—É –≤ –∫–æ—Ä–æ–±–∫—É?  
> ‚Äî –¢–æ–≥–¥–∞ —Ç—ã –Ω–µ —Ö–æ—á–µ—à—å –≤–µ—Ä–Ω—É—Ç—å –∑–∞–º—ã–∫–∞–Ω–∏–µ, —Ç—ã —Ö–æ—á–µ—à—å –ø—Ä–æ–±–ª–µ–º.
