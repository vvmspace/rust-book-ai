## –ñ–æ–Ω–≥–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—å—é—á–µ—Ä–∞–º–∏: `select!`, `timeout` –∏ –≥–æ–ª–æ–¥–∞–Ω–∏–µ ü§π

### –ü—Ä–æ–±–ª–µ–º–∞ –≥–æ–ª–æ–¥–∞–Ω–∏—è (Starvation)

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ Rust ‚Äî¬†**–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ**. –ï—Å–ª–∏ –≤—ã —Å–¥–µ–ª–∞–µ—Ç–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª `while true { ... }` –≤–Ω—É—Ç—Ä–∏ `async fn`, –≤—ã –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è. –î—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª—É—á–∞—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è.
–†–µ—à–µ–Ω–∏–µ: –±—É–¥—å—Ç–µ –≤–µ–∂–ª–∏–≤—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `yield_now()`, —á—Ç–æ–±—ã —É—Å—Ç—É–ø–∏—Ç—å –º–µ—Å—Ç–æ –¥—Ä—É–≥–∏–º.

```rust
async fn heavy_work() {
    for i in 0..1000000 {
        if i % 100 == 0 {
            tokio::task::yield_now().await; // "–Ø –ø–æ–∫–∞ –æ—Ç–¥–æ—Ö–Ω—É, –ø—É—Å—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ—Ä–∞–±–æ—Ç–∞—é—Ç"
        }
    }
}
```

### –¢–∞–π–º-–∞—É—Ç

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞: –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –Ω–æ –µ—Å–ª–∏ –æ–Ω–∞ —Ç—É–ø–∏—Ç –±–æ–ª—å—à–µ 2 —Å–µ–∫—É–Ω–¥ ‚Äî –æ—Ç–º–µ–Ω–∏—Ç—å –µ—ë.

```rust
use std::time::Duration;
use tokio::time::sleep;

async fn timeout<F: Future>(future: F, max_time: Duration) -> Result<F::Output, Duration> {
    tokio::select! {
        res = future => Ok(res),
        _ = sleep(max_time) => Err(max_time),
    }
}
```

–ú–∞–∫—Ä–æ—Å `select!` ‚Äî —ç—Ç–æ –≥–æ–Ω–∫–∞. –ö—Ç–æ –ø–µ—Ä–≤—ã–π —Ñ–∏–Ω–∏—à–∏—Ä–æ–≤–∞–ª ‚Äî —Ç–æ—Ç –∏ –º–æ–ª–æ–¥–µ—Ü. –ü—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è (dropped).

### –ò—Ç–æ–≥

–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–æ —Ç–æ, —á—Ç–æ–±—ã –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –¥–µ–ª –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –≠—Ç–æ –ø—Ä–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é. –ö—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω —É—Å—Ç—É–ø–∞—Ç—å, –∫—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –∂–¥–∞—Ç—å, –∞ –∫—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –≤–æ–≤—Ä–µ–º—è —É—Ö–æ–¥–∏—Ç—å —Å–æ —Å—Ü–µ–Ω—ã (–ø–æ —Ç–∞–π–º-–∞—É—Ç—É).

---

**–ê–Ω–µ–∫–¥–æ—Ç:**

> –ü—Ä–æ—Ö–æ–¥–∏—Ç —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é Senior Async Rust Developer.  
> ‚Äî –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `timeout`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ñ—å—é—á–µ—Ä –∏ –æ—Ç–º–µ–Ω—è–µ—Ç –µ–≥–æ, –µ—Å–ª–∏ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ–ª—å—à–µ N —Å–µ–∫—É–Ω–¥.
> –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–∏—à–µ—Ç.  
> ‚Äî –û—Ç–ª–∏—á–Ω–æ. –ê —Ç–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `timeout`, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–º–µ–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `timeout`, –µ—Å–ª–∏ —Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ–ª—å—à–µ M —Å–µ–∫—É–Ω–¥.
> –ö–∞–Ω–¥–∏–¥–∞—Ç –ø–∏—à–µ—Ç.  
> ‚Äî –í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ. –ê —Ç–µ–ø–µ—Ä—å...  
> ‚Äî –ò–∑–≤–∏–Ω–∏—Ç–µ, —É –º–µ–Ω—è `yield_now().await` —Å—Ä–∞–±–æ—Ç–∞–ª, —è –¥–æ–º–æ–π –ø–æ–π–¥—É.
