# Используем `Box<T>`, чтобы указывать на данные в куче

Самый простой умный указатель — `Box<T>`.
Он позволяет хранить данные в **куче** (heap), а на стеке остается только указатель на эти данные.

```rust
fn main() {
    let b = Box::new(5);
    println!("b = {}", b);
}
```

### Когда использовать Box?

1.  Когда тип имеет неизвестный размер во время компиляции (например, рекурсивные типы).
2.  Когда нужно передать владение большими данными без их копирования (копируется только указатель).
3.  Когда вы хотите владеть значением, реализующим определенный трейт (Trait Object), но не важен конкретный тип.

### Рекурсивные типы (Cons List)

В Rust нужно знать размер типа при компиляции. Рекурсивный тип (список, который содержит список) теоретически бесконечен.
`Box<T>` имеет фиксированный размер (размер указателя), поэтому он разрывает цикл бесконечности.

```rust
enum List {
    Cons(i32, Box<List>),
    Nil,
}

use crate::List::{Cons, Nil};

fn main() {
    let list = Cons(1, Box::new(Cons(2, Box::new(Cons(3, Box::new(Nil))))));
}
```

---

**Visual Analogy:**

> Это как Матрёшка. Если бы каждая матрёшка содержала внутри *такую же* матрёшку, Вселенная бы схлопнулась.
> `Box` — это как листок бумаги внутри матрёшки, на котором написано: "Следующая матрёшка лежит в шкафу". Листок бумаги имеет фиксированный размер, так что бесконечность отменяется.





---

**English Joke:**

> What's in the box? (Brad Pitt voice)
